<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horse Odds Calculator</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" />
  <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./service-worker.js')
      .then(() => console.log("‚úÖ Service Worker registered"));
  }
</script>

</head>
  <main class="card">
  <h1>Horse Odds Calculator</h1>

  <div id="authSection">
    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="signUp()">Sign Up</button>
    <button onclick="signIn()">Sign In</button>
    <button onclick="signOut()">Sign Out</button>
    <p id="authStatus"></p>
  </div>

  <label for="betMode">Select Bet Type:</label>
  <select id="betMode">
  <option value="win">Win</option>
  <option value="place">Place</option>
  <option value="show">Show</option>
  <option value="exacta">Exacta</option>
  <option value="exacta_box">Exacta Box</option>
  <option value="trifecta">Trifecta</option>
  <option value="trifecta_box">Trifecta Box</option>
  <option value="trifecta_key">Trifecta Key</option>
  <option value="superfecta">Superfecta</option>
  <option value="daily_double">Daily Double</option>
  <option value="pick3">Pick 3</option>
  <option value="pick4">Pick 4</option>
  <option value="pick5">Pick 5</option>
  <option value="pick6">Pick 6</option>
</select>

  <input type="number" id="betAmount" placeholder="Bet Amount ($)" min="0.5" step="0.1" />
  <input type="text" id="oddsInput" placeholder="Enter Odds (e.g., 9/5)" />
  <input type="text" id="trackInput" placeholder="Track Code" value="BEL" />
  <input type="date" id="raceDate" value="2025-07-24" />

  <button onclick="calculateOdds()">Calculate</button>
  <button onclick="fetchPayoutDataFromInputs()">Fetch Live Odds</button>
  <button id="shareBtn" class="share-button">Share This Bet</button>

  <div id="result"></div>
    <p id="betInfo" style="font-size: 0.85rem; color: #6b7280;"></p>
    
    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<!-- Custom JS -->
function calculateOdds() {
  const betType = document.getElementById('betMode').value;
  const betAmount = parseFloat(document.getElementById('betAmount').value);
  const oddsInput = document.getElementById('oddsInput').value;
  const resultDiv = document.getElementById('result');
  const betInfoDiv = document.getElementById('betInfo');

  if (!betAmount || !oddsInput.includes('/')) {
    resultDiv.innerHTML = "‚ùå Enter a valid bet amount and odds (e.g. 5/2)";
    betInfoDiv.innerHTML = "";
    return;
  }

  const [num, denom] = oddsInput.split('/').map(Number);
  const decimalOdds = num / denom;

  const multiplierMap = {
    win: 1,
    place: 0.5,
    show: 0.33,
    exacta: 2,
    exacta_box: 2.4,
    trifecta: 3,
    trifecta_box: 6,
    trifecta_key: 3,
    superfecta: 4,
    daily_double: 2,
    pick3: 3,
    pick4: 4,
    pick5: 5,
    pick6: 6
  };

  const descriptions = {
    exacta_box: "Boxing 2 horses = 2 combinations (1-2, 2-1)",
    trifecta_box: "Boxing 3 horses = 6 combinations",
    trifecta_key: "Keying 1 horse with 2 others = 3 combinations",
    daily_double: "Pick winners of 2 races",
    pick3: "Pick winners of 3 races",
    pick4: "Pick winners of 4 races",
    pick5: "Pick winners of 5 races",
    pick6: "Pick winners of 6 races"
  };

  const multiplier = multiplierMap[betType] || 1;
  const grossProfit = betAmount * decimalOdds * multiplier;
  const totalReturn = betAmount + grossProfit;
  const breakEvenOdds = (1 / multiplier).toFixed(2);
  const profitOrLoss = grossProfit <= 0 ? 'üî¥ Loss' : 'üü¢ Profit';
  const warning = grossProfit < 0.5 ? "‚ö†Ô∏è Odds may be too low to profit from this wager." : "";

  resultDiv.innerHTML = `
    üí∏ Type: <b>${betType}</b><br>
    üìä Decimal Odds: <b>${decimalOdds.toFixed(2)}</b><br>
    üí∞ Gross Profit: <b>$${grossProfit.toFixed(2)}</b><br>
    üíµ Total Return: <b>$${totalReturn.toFixed(2)}</b><br>
    üìà Break-even Odds: <b>${breakEvenOdds}</b><br>
    ‚úÖ ${profitOrLoss}<br>
    ${warning}
  `;

  betInfoDiv.innerText = descriptions[betType] || "";

  // Optional Firebase logging
  if (typeof logBetToFirestore === 'function') {
    logBetToFirestore({
      betType,
      amount: betAmount,
      odds: oddsInput,
      profit: grossProfit.toFixed(2),
      total: totalReturn.toFixed(2),
      timestamp: new Date(),
    });
  }
}

</body>
</html>

  const firebaseConfig = {
  apiKey: "AIzaSyDl7TW4J_yz8c-fJtE_trmcFRw1W0fcApA",
  authDomain: "horse-bet-calculator.firebaseapp.com",
  projectId: "horse-bet-calculator",
  appId: "1:258212871291:web:efcbb1d5715a9c9cd476de"
};
    
  </script>
  </main>
</html>
